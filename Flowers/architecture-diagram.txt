┌──────────────────────────────────────────────────────────────────────────────┐
│                          КЛИЕНТЫ (Web, Mobile, API)                          │
└───────────────────────────────┬──────────────────────────────────────────────┘
                                │
                                ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                         nginx-ingress (Единая точка входа)                   │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                          МАРШРУТИЗАЦИЯ                                 │  │
│  │                                                                        │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌───────────────┐  │  │
│  │  │   /auth/*   │  │  /user/* │  │  │   /health   │  │   /metrics    │  │  │
│  │  │  → Auth     │  │  → User     │  │  → Health   │  │  → Metrics    │  │  │
│  │  │   Service   │  │   Service   │  │   Checks    │  │   Endpoint    │  │  │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └───────────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────┬────────────────────────────────────────┘
                                      │
                          ┌───────────┼───────────┐
                          │           │           │
            ┌─────────────▼─────┐ ┌───▼─────────┐ │
            │   AUTH SERVICE    │ │ USER SERVICE│ │
            │   (Аутентификация)│ │ (Профили)   │ │
            │                   │ │             │ │
            │ • /register       │ │ • /profile  │ │
            │ • /login          │ │ • /user/{id}│ │
            │ • JWT генерация   │ │ • CRUD      │ │
            │ • BCrypt          │ │ • AuthZ     │ │
            └─────────┬─────────┘ └──────┬──────┘ │
                      │                  │        │
                      └──────────┐ ┌─────┘        │
                                 ▼ ▼              │
            ┌─────────────────────────────────────────────┐
            │             POSTGRESQL DATABASE             │
            │                                             │
            │  ┌─────────────────┐  ┌─────────────────┐   │
            │  │     users       │  │   auth_users    │   │
            │  │                 │  │                 │   │
            │  │ • id            │  │ • id            │   │
            │  │ • username      │  │ • user_id (FK)  │   │
            │  │ • firstname     │  │ • username      │   │
            │  │ • lastname      │  │ • password_hash │   │
            │  │ • email         │  │                 │   │
            │  │ • phone         │  │                 │   │
            │  └─────────────────┘  └─────────────────┘   │
            └─────────────────────────────────────────────┘